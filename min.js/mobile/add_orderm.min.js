$(function(){function a(a){let c,d="",e=[];switch(a){case 0:for(let a in provinces)e.push({Id:provinces[a].provinceId,Name:provinces[a].provinceName});break;case 1:for(let a in c=provinces[b[0]].citys,c)e.push({Id:c[a].cityId,Name:c[a].cityName});break;case 2:for(let a in c=provinces[b[0]].citys[b[1]].areas,console.log(c),c)e.push({Id:c[a].areaId,Name:c[a].areaName});}for(let b in e){let c=`
					<div class="row">
						<div class="col-xs-12" >
							<a class="addressbutton  addressnormal" data-class="${a}" name="${e[b].Id}">
									${e[b].Name}
							</a>
						</div>
					</div>
					`;d+=c}$(".addressmap [data-id="+a+"]").html(d)}let b=[-1,-1,-1],c=0;$("#expensebar").hide();class d extends Object{constructor(a){super(),this.tag=a}}class e extends d{NavBtClass(){this.tag.toggleClass("navnormal"),this.tag.toggleClass("navvisited")}HandelClick(){if($(".addresspanel[data-id="+c+"]").hide(),c=+this.tag.attr("name"),console.log(c),$(".addresspanel[data-id="+c+"]").show(),void 0!==j){let a=new e(j);a.NavBtClass(),a=null}j=this.tag,this.NavBtClass()}}class f extends d{AddBtClass(){this.tag.toggleClass("addressnormal"),this.tag.toggleClass("addressvisited")}HandlePre(){if(-1!==b[c]){let a=new f($("[data-class="+c+"][name="+b[c]+"]"));a.AddBtClass(),a=null}b[c]=$(this.tag).attr("name")}HandlePost(){let a=new f($("[data-class="+c+"][name="+b[c]+"]"));a.AddBtClass(),a=null;let d="";for(let a=0;a<c+1;++a)d+=$("[data-class="+a+"][name="+b[a]+"]").text();$("#addressbutton").text(d)}}class g extends f{constructor(a,b){super(a),this.pobt=b}HandleClick(){this.HandlePre(),$("#city").hide(),$("#area").hide(),a(1),$("#area").html(""),$("#areasub").val(""),this.HandlePost();let c={provinceId:b[0]};$.get("/order/postage/money",c,function(a){console.log(a),$("#expense").text("\u9884\u8BA1\u90AE\u8D39 \u81F3"+$("[data-class=0][name="+b[0]+"]").text()+"\uFF1ARMB"+a.postageMoney),$("#expensebar").show()}),31<b[0]?this.pobt.SetHide():this.pobt.SetShow(),$(".navbutton[name=1]").trigger("click")}}class h extends f{HandleClick(){this.HandlePre(),a(2),$("#areasub").val(""),this.HandlePost(),$(".navbutton[name=2]").trigger("click")}}class i extends f{HandleClick(){this.HandlePre(),$("#areasub").val(b[c]),this.HandlePost(),$("#Modalbox").modal("hide")}}let j;a(0);let k=new class{constructor(a,b,c,d){this.tagfalse=a,this.tagtrue=b,this.value=!1,this.isShow=!0,this.row=c,this.input=d,this.input.val(!1),this.PayOnlineBtClass(this.tagfalse)}PayOnlineBtClass(a){a.toggleClass("PayOnlineUv"),a.toggleClass("PayOnlineVd")}SetTrue(){this.value||(this.PayOnlineBtClass(this.tagfalse),this.PayOnlineBtClass(this.tagtrue),this.input.val(!0),this.value=!0)}SetFalse(){this.value&&(this.PayOnlineBtClass(this.tagfalse),this.PayOnlineBtClass(this.tagtrue),this.input.val(!1),this.value=!1)}SetShow(){this.isShow||(this.row.show(),this.isShow=!0)}SetHide(){this.isShow&&(this.row.hide(),this.SetFalse(),this.isShow=!1)}HandleClick(a){0==a&&this.value&&this.SetFalse(),1!=a||this.value||this.SetTrue()}}($(".PayOnlineBt[data-id=0]"),$(".PayOnlineBt[data-id=1]"),$(".isPayOnlineRow"),$("#isPayOnline"));$(".navbutton").on("click",function(){let a=new e($(this));a.HandelClick(),a=null,console.log(c)}),$(".PayOnlineBt").on("click",function(a){k.HandleClick($(a.target).attr("data-id"))}),$(".addressmap").on("click",".addressbutton",function(a){let b;0===c?b=new g($(a.target),k):1===c?b=new h($(a.target)):2===c?b=new i($(a.target)):void 0;b.HandleClick(),b=null}),$("#addressbutton").on("click",function(a){$("#Modalbox").modal();let b=$(".modal-dialog").height()-$(".modal-header").height()-$("#addressnav").height()-20;$(".addresspanel").css("height",b),a.stopPropagation(),$("#provincenav").trigger("click")}),$("#addOrderBtn").on("click",function(){if(name=$("#ordname").val(),0===name.length)return alert("\u6536\u8D27\u4EBA\u4E3A\u7A7A"),!1;if(10<=name.length)return alert("\u6536\u8D27\u59D3\u540D\u8FC7\u957F"),!1;if(phone=$("#ordphone").val(),11!==phone.length)return alert("\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"),!1;if(areanum=$("#areasub").val(),""===areanum||void 0===areanum)return alert("\u6536\u8D27\u5730\u5740\u4E0D\u5408\u6CD5\uFF01"),!1;if(adddetail=$("#ordadddel").val(),0===adddetail.length)return alert("\u6536\u8D27\u8BE6\u7EC6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),!1;if(50<=adddetail.length)return alert("\u6536\u8D27\u5730\u5740\u8FC7\u957F\uFF01"),!1;if(email=$("#ordemail").val(),0===email.length)return alert("\u7535\u5B50\u90AE\u7BB1\u4E3A\u7A7A"),!1;var a=/\w+[@]{1}\w+[.]\w+/;if(!a.test(email))return alert("Email\u683C\u5F0F\u4E0D\u5BF9"),!1;let b=$("#orderRemark").val();return 50<b.length?(alert("\u5907\u6CE8\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC750"),!1):void $("#addOrderForm").submit()})});
